        -:    0:Source:cardtest1.c
        -:    0:Graph:cardtest1.gcno
        -:    0:Data:cardtest1.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*This is the card test for the smithy
        -:    2:1. Current player should receive exactly 3 cards.
        -:    3:
        -:    4:2. 3 cards should come from his own pile.
        -:    5:
        -:    6:3. No state change should occur for other players.
        -:    7:
        -:    8:4. No state change should occur to the victory card piles and kingdom card piles.
        -:    9:
        -:   10:
        -:   11:int funcSmithy(struct gameState *state, int handPos)
        -:   12:{
        -:   13:    int i = 0;
        -:   14:    int currentPlayer = whoseTurn(state);
        -:   15:      //+3 Cards
        -:   16:    //BUG, <= was previouls <
        -:   17:      for (i = 0; i <= 3; i++)
        -:   18:	{
        -:   19:	  drawCard(currentPlayer, state);
        -:   20:	}
        -:   21:			
        -:   22:      //discard card from hand
        -:   23:      discardCard(handPos, currentPlayer, state, 0);
        -:   24:      return 0;
        -:   25:}
        -:   26:*/
        -:   27:
        -:   28:
        -:   29:#include "dominion.h"
        -:   30:#include <stdio.h>
        -:   31:#include "rngs.h"
        -:   32:#include <stdlib.h>
        -:   33:#include "dominion_helpers.h"
        -:   34:#include "assert.h"
        -:   35:#define TESTCARD "smithy"
        -:   36:
        1:   37:int main(){
        -:   38:    int returnValue;
        -:   39:    struct gameState G;
        -:   40:    //change these variables to test
        1:   41:    int players=2;
        1:   42:    int randomSeed=1;
        1:   43:    int hand[10]={curse, smithy, mine, gardens, great_hall, salvager, sea_hag, adventurer, silver, gold};
        -:   44:    //int initializeGame(int numPlayers, int kingdomCards[10], int randomSeed, struct gameState *state)
        -:   45:    //create a hand to pass in
        -:   46:    
        -:   47:    
        -:   48:    //if game is created, print 
        1:   49:    returnValue=initializeGame(players,hand,randomSeed, &G);
        1:   50:    assert(returnValue == 0);
        -:   51:    {
        1:   52:    printf("Card Test 1:\n");
        1:   53:    printf("Smithy:\n");
        1:   54:    printf("**Gamestate Created**\n");  
        1:   55:    printf("\n");
        -:   56:    }
        -:   57:    
        -:   58:    //intial hand count
        1:   59:    int handCount1=G.handCount[1];
        1:   60:    int player1=G.whoseTurn;
        1:   61:    int deckCountInitial= G.deckCount[1];
        -:   62:    //player should try three cards
        -:   63:  
        -:   64:	
        -:   65:	//test valid input
        -:   66:    
        1:   67:   returnValue = cardEffect(smithy, 0, 0, 0, &G, 10, 0);
        -:   68:	//returnValue = smithyFunc(&G, 4);
        -:   69:	
        -:   70:	
        1:   71:    if(returnValue==0)
        -:   72:    {
        1:   73:        printf("PASS:smithy run");
        1:   74:        printf("\n");
        -:   75:    }
        -:   76:    
        1:   77:    if(returnValue!=0)
        -:   78:    {
    #####:   79:        printf("FAIL: smithy not run");
    #####:   80:        printf("\n");
        -:   81:    }
        -:   82:    //second hand count
        1:   83:    int handCount2=G.handCount[1];
        1:   84:    int player2=G.whoseTurn;
        1:   85:    int deckCountInitial2= G.deckCount[1];
        -:   86:    
        1:   87:    if(handCount2>=(handCount1+3)){
    #####:   88:        printf("PASS: Hand size was increased");
    #####:   89:        printf("\n");
        -:   90:    }
        -:   91:    
        1:   92:    if(handCount2==handCount1){
        1:   93:        printf("FAIL: Hand size was not increased");
        1:   94:        printf("\n");
        -:   95:    }
        -:   96:    
        1:   97:    if(handCount2<=(handCount1+3)){
        1:   98:        printf("PASS: Hand size was decreased");
        1:   99:        printf("\n");
        -:  100:    }
        -:  101:    
        -:  102:    //still same palyer is active
        1:  103:    if(player1==player2){
        1:  104:    printf("PASS: Same Player is Active");
        1:  105:    printf("\n");
        -:  106:    }
        -:  107:    
        1:  108:    if(player1!=player2){
    #####:  109:    printf("FAIL: Same Player is not Active");
    #####:  110:    printf("\n");
        -:  111:    }       
        -:  112:        
        -:  113:    //deck count decreased    
        1:  114:    if(deckCountInitial>deckCountInitial2) {
    #####:  115:    printf("Pass: Deck was decreased");
    #####:  116:    printf("\n");}
        -:  117:        
        1:  118:    if(deckCountInitial<deckCountInitial2) {
    #####:  119:    printf("FAIL: Deck was NOT decreased");
    #####:  120:    printf("\n");}
        1:  121:	printf("\n >>>>> SUCCESS: Testing complete %s <<<<<\n\n", TESTCARD);
        1:  122:	return 0;
        -:  123:}
        -:  124:    
